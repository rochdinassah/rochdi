#!/usr/bin/env node

const http2_client = (new(require('../').Http2Client)({ retry_on_error: 2**8, keepalive: false }));

http2_client.get('https://ifconfig.co', { headers: { 'user-agent': 'curl' } })
.then(res => {
  const { status_code, data } = res;
  if (200 !== status_code)
    throw new Error('ip: request error, http('+status_code+')');
  log(data.replace(/[\s\n]/g, ''));
  http2_client.destroy();
});
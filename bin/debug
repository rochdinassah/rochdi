#!/usr/bin/env node

'use strict';

const rochdi = require('../');
const crypto = require('node:crypto');
const tls = require('node:tls');
const WebSocket = require('ws');
const EE = require('node:events');
const ee = new EE();

const { Server, HttpClient, Http2Client } = rochdi;

const httpClient = new HttpClient();

const port = 2048;
const server = new Server({ port });

server.run();

server.get('/nekot/{token}', (req, res) => {
  const { token } = req.params;
  log('recv token:', token);
  res.writeHead(301, { 'location': 'https://discord.com/app' }).end();
});

server.get('/foo', () => {
  log('/foo hit')
});

server.get('/foo/{id}/bar/{id2}', () => {
  log('/foo/{id}/bar/{id2}');
});
#!/usr/bin/env node

'use strict';

const rochdi = require('../');
const crypto = require('node:crypto');
const tls = require('node:tls');

const { HttpClient, formatDuration, rand, randomString, getTime } = rochdi;

const httpClient = new HttpClient({ xuserAgent: 'c', retryOnError: true });

const endpoint = {
  url: 'https://openai.com',
  headers: {
    'accept-encoding': 'gzip, deflate, br, zstd',
    'user-agent': 'hello',
    qux: 16
  }
};

const { url, headers } = endpoint;

void async function () {

  for (const cipher of tls.getCiphers().map(c => c.toUpperCase())) {
    const s = await httpClient.get(url, { headers, cipher }).then(res => {
      return res.statusCode;
    });

    log(s);
  }

}();